---
title: "R Notebook"
output: Max/Min Latitude
---

Goal: Find the maximum and minimum latitude for each species for each year.

```{r setup}
load("lookdown_table.RData")

library(dplyr)
library(data.table)
library(stringr)
library(tibble)
library(ggplot2)
```

Add a year and month column.
```{r add columns}
lookdown_table[ , YEAR := format(DATE, "%y")]
lookdown_table[ , MONTH := format(DATE, "%m")]
```

Add max/min latitude for year.
```{r lat}
lookdown_table[ , MAX_LAT := max(LATITUDE), by = YEAR]
lookdown_table[ , MIN_LAT := min(LATITUDE), by = YEAR]
```

Add a season column.
```{r season}
lookdown_table[ , SEASON := "spring"]
lookdown_table[MONTH>6, SEASON := "fall"]
#fall not working
```

Graph year vs. max/min.
```{r graph}
ggplot(aes(x=YEAR), data = lookdown_table) +
  geom_point(aes(y=MAX_LAT)) +
  theme_classic()

ggplot(aes(x=YEAR), data = lookdown_table) +
  geom_point(aes(y=MIN_LAT)) +
  theme_classic()

#starts at 2000, swtiches from 2018 to 1968
```

Some other graphs...
```{r}
ggplot(aes(x=YEAR, y=TEMPERATURE), data = lookdown_table) +
  geom_point() +
  theme_classic()

lookdown_table[ , AVG_TEMP := mean(TEMPERATURE), by = YEAR]

ggplot(aes(x=YEAR, y=AVG_TEMP), data = lookdown_table) +
  geom_point() +
  theme_classic()  #13,000 rows w/o values

lookdown_table[ , AVG_LEN := mean(LENGTH), by = YEAR]

ggplot(aes(x=YEAR), data = lookdown_table) +
  geom_point(aes(y=AVG_LEN)) +
  theme_classic()  #10,000 rows didn't get values

ggplot(lookdown_table, aes(x=YEAR, y=MAX_LAT)) +
  geom_point() +
  geom_smooth(method=lm)  #regression line doesn't appear
```

